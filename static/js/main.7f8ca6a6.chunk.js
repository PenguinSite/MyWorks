(this.webpackJsonpmy_app=this.webpackJsonpmy_app||[]).push([[0],{115:function(e,t,a){e.exports=a(256)},120:function(e,t,a){},121:function(e,t,a){},122:function(e,t,a){},123:function(e,t,a){},124:function(e,t,a){},129:function(e,t,a){},130:function(e,t,a){},131:function(e,t,a){},132:function(e,t,a){},133:function(e,t,a){},153:function(e,t,a){},154:function(e,t,a){},155:function(e,t,a){},156:function(e,t,a){},254:function(e,t,a){},255:function(e,t,a){},256:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(47),i=a.n(c),l=(a(120),a(105)),u=a(106),s=a(113),o=a(107),m=a(114),d=(a(121),a(122),function(e){var t=["MenuToggle","fa"];return e.isOpen?(t.push("fa-times"),t.push("open")):t.push("fa-bars"),r.a.createElement("i",{className:t.join(" "),onClick:e.onToggle})}),p=(a(123),a(124),function(e){return r.a.createElement("div",{className:"Backdrop",onClick:e.onClick})}),E=a(10),f=[{to:"/",label:"\u0421\u043f\u0438\u0441\u043e\u043a",exact:!0},{to:"/auth",label:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f",exact:!1},{to:"/quiz-creator",label:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0435\u0441\u0442",exact:!1}],v=function(e){function t(){e.onClose()}var a=["Drawer"];return e.isOpen||a.push("close"),r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:a.join(" ")},r.a.createElement("ul",null,f.map((function(e,a){return r.a.createElement("li",{key:a},r.a.createElement(E.c,{to:e.to,exact:e.exact,activeClassName:"page-active",onClick:t},e.label))})))),e.isOpen?r.a.createElement(p,{onClick:e.onClose}):null)},h=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(r)))).state={menu:!1},a.toggleMenuHandler=function(){a.setState({menu:!a.state.menu})},a.menuCloseHandler=function(){a.setState({menu:!1})},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"Layout"},r.a.createElement(v,{isOpen:this.state.menu,onClose:this.menuCloseHandler}),r.a.createElement(d,{onToggle:this.toggleMenuHandler,isOpen:this.state.menu}),r.a.createElement("main",null,this.props.children))}}]),t}(n.Component),b=(a(129),a(130),a(24)),g=function(e){var t=Object(n.useState)(null),a=Object(b.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)("wrong_answer"),u=Object(b.a)(l,2),s=u[0],o=u[1];return Object(n.useEffect)((function(){o("wrong_answer")}),[s]),r.a.createElement("div",{className:"demo__elems"},e.answers.map((function(e,t){return r.a.createElement("div",{className:"demo__elem demo__elem-"+(t+1),key:t},e.text)})),e.answers.map((function(t,a){return r.a.createElement("span",{className:"demo__hover demo__hover-"+t.id,onClick:function(){var a;e.onAnswerClick(+t.id),a=+t.id,i(a),o("")},key:t.id})})),r.a.createElement("div",{className:"demo__highlighter"},r.a.createElement("div",{className:"demo__elems"},e.answers.map((function(e,t){return r.a.createElement("div",{className:"demo__elem",key:t},e.text)})))),r.a.createElement("div",{className:"demo__examples"},r.a.createElement("p",null,e.answerNumber," \u0438\u0437 ",e.quizLength),r.a.createElement("div",{className:"demo__examples-nb"},r.a.createElement("div",{className:"nb-inner"},null!=e.state?"error"===e.state[c]?r.a.createElement("div",{className:s},"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e"):r.a.createElement("div",{className:"right_answer"},"\u0412\u0435\u0440\u043d\u043e"):null))))},y=function(e){return r.a.createElement("div",{className:"demo",style:{height:29+7*e.answers.length+"rem"}},r.a.createElement("div",{className:"demo__content"},r.a.createElement("h2",{className:"demo__heading"},e.answerNumber+". ",e.question," "),r.a.createElement(g,{answers:e.answers,onAnswerClick:e.onAnswerClick,state:e.state,quizLength:e.quizLength,answerNumber:e.answerNumber})))},w=(a(131),a(132),function(e){var t=["Button",e.type];return e.extraClass&&t.push(e.extraClass),r.a.createElement("button",{onClick:e.onClick,className:t.join(" "),disabled:e.disabled},e.children)}),_=function(e){var t=Object.keys(e.results).reduce((function(t,a){return"success"===e.results[a]&&t++,t}),0);return r.a.createElement("div",{className:"FinishedQuiz"},r.a.createElement("ul",null,e.quiz.map((function(t,a){var n=["fa","error"===e.results[t.id]?"fa-times":"fa-check"];return r.a.createElement("li",{key:a},r.a.createElement("strong",null,a+1+". "," "),t.question,r.a.createElement("i",{className:n.join(" ")}))}))),r.a.createElement("p",null,"\u041f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e ",t," \u0438\u0437 ",e.quiz.length),r.a.createElement("div",null,r.a.createElement(w,{onClick:e.onRetry,type:"primary"},"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c"),r.a.createElement(E.b,{to:"/"},r.a.createElement(w,{type:"success"},"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u0441\u043f\u0438\u0441\u043e\u043a \u0442\u0435\u0441\u0442\u043e\u0432"))))},S=(a(133),function(e){return r.a.createElement("div",{className:"lds-dual-ring"})}),O=a(11),z=a(36),q=a(17),j=a.n(q),C=a(48),T=a.n(C),N=T.a.create({baseURL:"https://my-app-705e8.firebaseio.com/"});function Q(e){return{type:"FETCH_QUIZ_SUCCESS",quiz:e}}function k(){return{type:"FETCH_QUIZES_START"}}function I(e){return{type:"SUCCESS",quizes:e}}function U(e){return{type:"ERROR",error:e}}function A(e,t){return{type:"QUIZ_SET_STATE",answerState:e,results:t}}var x=Object(O.b)((function(e){return{results:e.quiz.results,isFinished:e.quiz.isFinished,activeQuestion:e.quiz.activeQuestion,answerState:e.quiz.answerState,quiz:e.quiz.quiz,loading:e.quiz.loading}}),{fetchQuizById:function(e){return function(t){var a,n;return j.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t(k()),r.prev=1,r.next=4,j.a.awrap(N.get("/quizes/".concat(e,".json")));case 4:a=r.sent,n=a.data,t(Q(n)),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),t(U(r.t0));case 12:case"end":return r.stop()}}),null,null,[[1,9]])}},quizAnswerClick:function(e){return function(t,a){var n=a().quiz;if(n.answerState){var r=Object.keys(n.answerState)[0];if("success"===n.answerState[r])return}var c=n.quiz[n.activeQuestion],i=n.results;if(c.rightAnswerId===e){i[c.id]||(i[c.id]="success"),t(A(Object(z.a)({},e,"success"),i));var l=window.setTimeout((function(){!function(e){return e.activeQuestion+1===e.quiz.length}(n)?t({type:"QUIZ_NEXT_QUESTION",number:n.activeQuestion+1}):t({type:"FINISHED_QUIZ"}),window.clearTimeout(l)}),3e3)}else i[c.id]="error",t(A(Object(z.a)({},e,"error"),i))}},retryQuiz:function(){return{type:"QUIZ_RETRY"}}})((function(e){return Object(n.useEffect)((function(){return e.fetchQuizById(e.match.params.id),function(){e.retryQuiz()}}),[]),r.a.createElement("div",{className:"Quiz"},r.a.createElement("div",{className:"QuizWrapper"},r.a.createElement("h1",null,"\u041e\u0442\u0432\u0435\u0442\u044c\u0442\u0435 \u043d\u0430 \u0432\u043e\u043f\u0440\u043e\u0441\u044b"),e.loading||!e.quiz?r.a.createElement(S,null):e.isFinished?r.a.createElement(_,{results:e.results,quiz:e.quiz,onRetry:e.retryQuiz}):r.a.createElement(y,{answers:e.quiz[e.activeQuestion].answers,question:e.quiz[e.activeQuestion].question,onAnswerClick:e.quizAnswerClick,quizLength:e.quiz.length,answerNumber:e.activeQuestion+1,state:e.answerState})))})),R=a(23);a(153);var F=Object(O.b)((function(e){return{quizes:e.quiz.quizes,loading:e.quiz.loading}}),{fetchQuizes:function(){return function(e){var t,a;return j.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e(k()),n.prev=1,n.next=4,j.a.awrap(N.get("quizes.json"));case 4:t=n.sent,a=[],Object.keys(t.data).forEach((function(e,t){a.push({id:e,name:"\u0422\u0435\u0441\u0442 ".concat(t+1)})})),e(I(a)),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),e(U(n.t0));case 13:case"end":return n.stop()}}),null,null,[[1,10]])}}})((function(e){return Object(n.useEffect)((function(){e.fetchQuizes()}),[]),r.a.createElement("div",{className:"QuizList"},r.a.createElement("h1",null,"\u0421\u043f\u0438\u0441\u043e\u043a \u0442\u0435\u0441\u0442\u043e\u0432"),e.loading&&0!==e.quizes.length?r.a.createElement(S,null):r.a.createElement("ul",null,e.quizes.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(E.c,{to:"/quiz/"+e.id},e.name))}))))})),Z=a(29),D=(a(154),a(155),function(e){var t=e.input,a=e.meta,n=Object(Z.a)(e,["input","meta"]),c=n.type||"text",i="".concat(c,"-").concat(Math.random());return r.a.createElement("div",{className:["Input"].join(" ")},r.a.createElement("label",{htmlFor:i},n.label),r.a.createElement("input",Object.assign({type:c,id:i,value:n.value},n,t)),a.error&&a.touched?r.a.createElement("span",{style:{color:"red"}},a.error):null)}),H=(a(156),function(e){var t=e.input,a=(e.meta,Object(Z.a)(e,["input","meta"]));return r.a.createElement("div",{className:"Select"},r.a.createElement("label",{htmlFor:"htmlFor"},a.label),r.a.createElement("select",Object.assign({},a,t),a.children))});function L(e){return{type:"CREATE_QUIZ_QUESTION",item:e}}var M=a(258),X=a(257),B=function(e){if(!e)return"This field is required\n"},W=function(e){if(!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase()))return"Please enter a valid email"},P=function(e){if(e.length<8)return"there must be at least 8 characters\n"},G=Object(X.a)({form:"quizCreator"})((function(e){var t=e.createQuizQuestion,a=e.finishCreateQuiz,c=Object(Z.a)(e,["createQuizQuestion","finishCreateQuiz"]),i=Object(n.useState)(2),l=Object(b.a)(i,2),u=l[0],s=l[1],o=Object(n.useState)(null),m=Object(b.a)(o,2),d=m[0],p=m[1],f=Object(n.useState)(!1),v=Object(b.a)(f,2),h=v[0],g=v[1];return Object(n.useEffect)((function(){"add"===d&&c.data&&(t(c.data),c.destroy("quizCreator"),s(2)),"create"===d&&c.data&&(a(c.data),c.destroy("quizCreator"),g(!0)),p(null)}),[c.data]),r.a.createElement("div",{className:"QuizCreator"},c.loading?r.a.createElement(S,null):!0!==h?r.a.createElement("div",null,r.a.createElement("h1",null,"\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u0442\u0435\u0441\u0442"),r.a.createElement("form",{onSubmit:c.handleSubmit},r.a.createElement(M.a,{label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u043e\u043f\u0440\u043e\u0441",component:D,name:"question",validate:B}),function(){for(var e=[],t=1;t<=u;t++)e.push(t);return e.map((function(e){return r.a.createElement(M.a,{key:e,label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0440\u0438\u0430\u043d\u0442 \u043e\u0442\u0432\u0435\u0442\u0430",component:D,name:"Answer"+e,validate:B})}))}(),r.a.createElement(M.a,{name:"rightAnswerId",component:H},function(){for(var e=[],t=1;t<=u;t++)e.push(t);return e.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))}()),r.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},r.a.createElement(w,{type:"primary",onClick:function(e){return function(e){e.preventDefault(),7!==u&&s(+u+1)}(e)}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u0432\u0435\u0442"),r.a.createElement(w,{type:"error",onClick:function(e){return function(e){e.preventDefault(),2!==u&&(s(+u-1),c.array.pop("Answer"+u),c.array.pop("Answer"+u))}(e)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043e\u0442\u0432\u0435\u0442"),r.a.createElement(w,{type:"primary",onClick:function(){p("add")}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u043e\u043f\u0440\u043e\u0441 \u0432 \u0442\u0435\u0441\u0442"),r.a.createElement(w,{type:"success",onClick:function(){p("create")}},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0435\u0441\u0442")))):r.a.createElement("div",null,r.a.createElement("h1",null,"\u0422\u0435\u0441\u0442 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d"),r.a.createElement(E.c,{to:"/"}," ",r.a.createElement(w,{type:"primary",extraClass:"button_go_to_test_list"},"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u0441\u043f\u0438\u0441\u043a\u0443 \u0442\u0435\u0441\u0442\u043e\u0432"))))}));var J=Object(O.b)((function(e){return{quiz:e.create.quiz,loading:e.create.loading}}),{createQuizQuestion:L,finishCreateQuiz:function(e){return function(t,a){return j.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t({type:"FETCH_QUIZES_START_TEST"}),t(L(e)),n.next=4,j.a.awrap(N.post("quizes.json",a().create.quiz));case 4:t({type:"RESET_QUIZ_CREATION"});case 5:case"end":return n.stop()}}))}}})((function(e){var t=Object(n.useState)(null),a=Object(b.a)(t,2),c=a[0],i=a[1];return r.a.createElement(G,Object.assign({onSubmit:function(t){var a={answers:[]};for(var n in t)if("string"===typeof t[n])switch(n){case"question":a[n]=t[n];case"rightAnswerId":a[n]=+t[n];default:var r=n.slice(-1);a.answers.push({id:r,text:t[n]})}a.id=e.quiz.length+1,a.rightAnswerId||(a.rightAnswerId=1),i(a)},deleteField:e.unregisterField,data:c},e))}));a(254);function V(e){return function(t){setTimeout((function(){t((localStorage.removeItem("token"),localStorage.removeItem("userId"),localStorage.removeItem("expirationDate"),{type:"AUTH_LOGOUT"}))}),1e3*e)}}var Y=Object(X.a)({form:"auth"})((function(e){return r.a.createElement("div",{className:"Auth"},r.a.createElement("div",null,r.a.createElement("h1",null,"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"),r.a.createElement("form",{className:"AuthForm",onSubmit:e.handleSubmit},r.a.createElement(M.a,{type:"text",label:"email",name:"email",component:D,validate:[B,W]}),r.a.createElement(M.a,{type:"password",label:"password",name:"password",component:D,validate:[B,P]}),r.a.createElement("div",{className:"formDescription"},"if you don\u2019t have an account, you can create one ",r.a.createElement(E.c,{to:"/registration"},"here")),r.a.createElement(w,{type:"success"},"\u0412\u043e\u0439\u0442\u0438"))))})),$=Object(O.b)(null,{auth:function(e,t,a){return function(n){var r,c,i,l,u;return j.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return r={email:e,password:t,returnSecureToken:!0},c="https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyD-lWmZ3iqeNklfmnRz45QFgZApwcv0Lg4",a&&(c="https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyD-lWmZ3iqeNklfmnRz45QFgZApwcv0Lg4"),s.next=5,j.a.awrap(T.a.post(c,r));case 5:i=s.sent,l=i.data,u=new Date((new Date).getTime()+1e3*l.expiresIn),localStorage.setItem("token",l.idToken),localStorage.setItem("userId",l.localId),localStorage.setItem("expirationDate",u),n({type:"AUTH_SUCCESS",token:l.idToken}),n(V(l.expiresIn));case 13:case"end":return s.stop()}}))}}})((function(e){return r.a.createElement(Y,{onSubmit:function(e){console.log(e)}})})),K=(a(255),Object(X.a)({form:"registration"})((function(e){return r.a.createElement("div",{className:"Registration"},r.a.createElement("div",null,r.a.createElement("h1",null,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),r.a.createElement("form",{className:"RegistrationForm",onSubmit:e.handleSubmit},r.a.createElement(M.a,{type:"text",label:"first name",name:"first_name",component:D,validate:B}),r.a.createElement(M.a,{type:"text",label:"second_name",name:"second_name",component:D,validate:B}),r.a.createElement(M.a,{type:"text",label:"email",name:"email",component:D,validate:[B,W]}),r.a.createElement(M.a,{type:"password",label:"password",name:"password",component:D,validate:[B,P]}),r.a.createElement(M.a,{type:"password",label:"repeat your password",name:"password_repeat",component:D,validate:[B,P]}),r.a.createElement("div",{className:"formDescription"},"if you already have an account, you can log in ",r.a.createElement(E.c,{to:"/auth"},"here")),r.a.createElement(w,{type:"primary"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"))))}))),ee=function(e){return r.a.createElement(K,{onSubmit:function(e){console.log(e)}})};var te=function(){return r.a.createElement(h,null,r.a.createElement(R.c,null,r.a.createElement(R.a,{path:"/auth",component:$}),r.a.createElement(R.a,{path:"/registration",component:ee}),r.a.createElement(R.a,{path:"/quiz-creator",component:J}),r.a.createElement(R.a,{path:"/quiz/:id",component:x}),r.a.createElement(R.a,{path:"/",exact:!0,component:F})))},ae=a(6),ne=a(9),re={quizes:[],loading:!1,error:null,results:{},isFinished:!1,activeQuestion:0,answerState:null,quiz:null};var ce=a(112),ie={quiz:[],loading:!1};var le={token:null};var ue=a(259),se=Object(ae.c)({quiz:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_QUIZES_START":return Object(ne.a)({},e,{loading:!0});case"SUCCESS":return Object(ne.a)({},e,{loading:!1,quizes:t.quizes});case"ERROR":return Object(ne.a)({},e,{loading:!1,error:t.error});case"FETCH_QUIZ_SUCCESS":return Object(ne.a)({},e,{loading:!1,quiz:t.quiz});case"QUIZ_SET_STATE":return Object(ne.a)({},e,{answerState:t.answerState,results:t.results});case"FINISHED_QUIZ":return Object(ne.a)({},e,{isFinished:!0});case"QUIZ_NEXT_QUESTION":return Object(ne.a)({},e,{answerState:null,activeQuestion:t.number});case"QUIZ_RETRY":return Object(ne.a)({},e,{activeQuestion:0,answerState:null,isFinished:!1,results:{}});default:return e}},create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_QUIZ_QUESTION":return Object(ne.a)({},e,{quiz:[].concat(Object(ce.a)(e.quiz),[t.item])});case"RESET_QUIZ_CREATION":return Object(ne.a)({},e,{loading:!1,quiz:[]});case"FETCH_QUIZES_START_TEST":return Object(ne.a)({},e,{loading:!0});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_LOGOUT":return Object(ne.a)({},e,{token:null});case"AUTH_SUCCESS":return Object(ne.a)({},e,{token:t.token});default:return e}},form:ue.a}),oe=a(111),me="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):ae.d,de=Object(ae.e)(se,me(Object(ae.a)(oe.a))),pe=r.a.createElement(O.a,{store:de},r.a.createElement(E.a,null,r.a.createElement("div",null,r.a.createElement(te,null))));i.a.render(r.a.createElement("div",null,pe),document.getElementById("root"))}},[[115,1,2]]]);
//# sourceMappingURL=main.7f8ca6a6.chunk.js.map